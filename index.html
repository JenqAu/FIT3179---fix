<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NBA Universe: The Court of Legends</title>

  <!-- Vega, Vega-Lite & Vega-Embed -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- NBA Header -->
  <header class="nba-topbar">
    <div class="nba-logo-text">
      <img src="logo-nba.svg" alt="NBA Logo" class="nba-logo">
    </div>
    <div class="project-title">
      <h1>The NBA Universe: Movement, Mastery & Myth</h1>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Scene 1: Origins -->
    <section class="scene origins">
      <div class="scene-header">
        <h1>Origins of Greatness</h1>
        <p>This visualization illustrates how birthplaces, from the playgrounds of Chicago to the beaches of Los Angeles, inspired the league's earliest legends.</p>
      </div>
      <div class="map-container">
        <div id="choropleth_map"></div>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Scene 2: Legends Skill Radar -->
    <section class="radar-section">
      <div class="section-header">
        <h2>The Skill Constellation of Legends</h2>
        <p>Every legend balances <strong>power, precision, and playmaking</strong> differently. Explore twenty icons and spot category leaders highlighted in <strong style="color: #2563eb;">blue</strong>.</p>
      </div>

      <div class="player-section-grid">
        <!-- Player Card -->
        <div class="player-card">
          <img id="photo" alt="Selected player portrait" hidden>
          <h3 id="player-name">Select a Legend</h3>
        </div>

        <!-- Player Stats -->
        <div class="player-stats">
          <h2>Signature Stats</h2>
          <ul id="stats-list">
            <li>2P: —</li>
            <li>3P: —</li>
            <li>AST: —</li>
            <li>TRB: —</li>
            <li>BLK: —</li>
            <li>STL: —</li>
          </ul>
          <p class="stat-caption">
            Each value represents <em>normalized career averages</em>, leveling the field across eras of play.
          </p>
        </div>

        <!-- Radar Chart -->
        <div class="radar-panel">
          <div id="radar_chart"></div>
        </div>

        <!-- Player Selector -->
        <div class="selector-panel">
          <label for="player-select"><strong>Compare Legends</strong></label>
          <select id="player-select" multiple size="10"></select>
          <p class="selector-hint">
            Tip: Hold <kbd>Ctrl</kbd> (Windows) or <kbd>Cmd</kbd> (Mac) to view overlapping skill signatures.
          </p>
        </div>
      </div>

      <div class="section-footer">
        <p>
          <strong style="color: #2563eb;">John Stockton</strong> is the lone legend leading two categories—assists and steals—showing dual mastery.
          <strong style="color: #2563eb;">Wilt Chamberlain</strong>'s 25,597 boards and <strong style="color: #2563eb;">Kareem Abdul-Jabbar</strong>'s 2-point efficiency anchor the skill map across eras.
        </p>
      </div>
    </section>

    <hr class="section-divider">

    <!-- Scene 3: The GOAT Debate -->
<section class="shot-section">
  <div class="section-header">
    <h2>The GOAT Debate: Jordan vs. LeBron</h2>
    <p>The defining debate pairs Michael Jordan and LeBron James, letting their shot maps reveal how eras evolved. One thrived in a slower mid-range battlefield, while the other excelled in a faster, space-driven league.</p>
  </div>

  <div class="shot-row">
    <!-- Jordan -->
    <div class="shot-card">
      <h3>Michael Jordan</h3>
      <div class="shot-map" id="shot_chart_mj"></div>
      <p class="shot-caption">
        Jordan’s map glows blue inside the arc, especially around the elbows and baselines. The sparse threes echo the 1990s belief that a mid-range jumper was royalty.
      </p>
    </div>

    <!-- LeBron -->
    <div class="shot-card">
      <h3>LeBron James</h3>
      <div class="shot-map" id="shot_chart_lebron"></div>
      <p class="shot-caption">
        LeBron’s chart burns red at the rim, driven by spacing, transition pace, and analytics.
        Corner flares show kick-outs and catch-and-shoot threes that define the modern efficiency race.
      </p>
    </div>
  </div>

  <div class="section-footer">
    <p>
      Jordan’s half-court artistry matched an 85–90 possession pace, while LeBron thrives in a league that races past 95 possessions with more threes.
      The GOAT debate now doubles as a timeline for how tempo and shot value keep reshaping greatness.
    </p>
  </div>
</section>




    <hr class="section-divider">

    <!-- Scene 4: 3-Point Revolution -->
    <section class="threept-section">
  <div class="section-header">
    <h2>The 3-Point Revolution</h2>
    <p>Once experimental, the three-point shot now drives the modern game. Track how <strong style="color:#1d4ed8;">attempts</strong> surged while <strong style="color:#f97316;">accuracy</strong> held steady, revealing efficiency catching up to ambition.</p>
  </div>

  <div id="threept_decades"></div>

  <div class="section-footer">
    <p>
      The surge after <strong style="color:#b91c1c;">2012</strong> mirrors the analytics boom and Stephen Curry's limitless range, pushing teams toward spacing and transition threes.
      Even a brief post-2020 dip faded as Damian Lillard and Trae Young stretched the floor, keeping the arc as the league's pulse.
    </p>
  </div>
</section>



    <hr class="section-divider">

    <!-- Scene 5: Momentum Stream -->
    <section class="momentum-section">
      <div class="section-header">
        <h2>Game Momentum Flow</h2>
        <p>The <strong>2016 NBA Finals Game 7</strong> between the <strong style="color:#1d4ed8;">Cleveland Cavaliers</strong> and <strong style="color:#dc2626;">Golden State Warriors</strong> is momentum whiplash at its peak. Every surge maps the pace swings, from LeBron's chase-down block to Kyrie Irving's dagger three.</p>
      </div>

      <div id="momentum_graph"></div>

      <div class="section-footer">
        <p>
          Cleveland’s comeback doubled as a turning point toward a high-tempo, transition-heavy NBA.
          Today’s game leans on speed, spacing, and three-point bursts that can flip control in seconds, just as 2016 foretold.
        </p>
      </div>
    </section>




    <hr class="section-divider">

    <!-- Scene 6: Dynasty Waffle -->
<section class="waffle-section">
  <div class="section-header">
    <h2>Dynasties of Dominance</h2>
    <p>Every championship ring marks resilience and legacy, from the Showtime Lakers to today’s Warriors. This waffle chart stacks each title into a single mosaic of NBA supremacy.</p>
  </div>

  <div class="waffle-container">
    <div id="dynasty_waffle"></div>
  </div>

  <div class="section-footer">
    <p>
      The Bulls owned the 1990s, while the Lakers and Warriors stretched dynasties across decades.
      Every cluster shows how team culture, chemistry, and endurance evolve with each banner raised.
    </p>
  </div>
</section>

    <hr class="section-divider">

    <section class="metadata-section">
      <div class="section-header">
        <h2>Data Sources & Metadata</h2>
      </div>

      <div class="metadata-body">
        <p><strong>Author:</strong> Au Jenq</p>
        <p><strong>Updated:</strong> October 21, 2025</p>
        <ul class="metadata-list">
          <li><a href="https://www.kaggle.com/datasets/thedevastator/birthplaces-of-nba-and-aba-players?select=NBA+Players+by+State.csv" target="_blank" rel="noopener noreferrer">Kaggle – Birthplaces of NBA and ABA Players</a></li>
          <li><a href="https://www.census.gov/data/tables/time-series/demo/popest/2020s-state-total.html" target="_blank" rel="noopener noreferrer">US Census – 2020s State Population Estimates</a></li>
          <li><a href="https://www.kaggle.com/datasets/justinas/nba-players-data/data" target="_blank" rel="noopener noreferrer">Kaggle – NBA Players Data</a></li>
          <li><a href="https://www.kaggle.com/datasets/gabrielmanfredi/nba-retro-1995-to-2000-full-basketball-datasets?select=shots_log.csv" target="_blank" rel="noopener noreferrer">Kaggle – NBA Retro Shots Log (1995–2000)</a></li>
          <li><a href="https://www.kaggle.com/datasets/drgilermo/nba-players-stats?utm_source=chatgpt.com&select=player_data.csv" target="_blank" rel="noopener noreferrer">Kaggle – NBA Players Stats</a></li>
          <li><a href="https://www.nba.com/" target="_blank" rel="noopener noreferrer">NBA.com – Official League Resources</a></li>
        </ul>
      </div>
    </section>

  </main>

  <!-- JavaScript -->
  <script type="module">
    try {
      // Load visualizations
      await vegaEmbed('#choropleth_map', 'js/choropleth_map.vg.json', { actions: false });
      const radarResult = await vegaEmbed('#radar_chart', 'js/top_players_radar.vg.json', { actions: false });
      const radarView = radarResult.view;
  await vegaEmbed('#shot_chart_mj', 'js/shot_scatter_joint.vg.json', { actions: false });
  await vegaEmbed('#shot_chart_lebron', 'js/shot_scatter_lebron.vg.json', { actions: false });
      await vegaEmbed('#threept_decades', 'js/threept_decades.vg.json', { actions: false });
      await vegaEmbed('#momentum_graph', 'js/nba_momentum_stream.vg.json', { actions: false });
      await vegaEmbed('#dynasty_waffle', 'js/nba_dynasty_waffle.vg.json', { actions: false });

      // Player Data & Dropdown Logic
      const playerSelect = document.getElementById('player-select');
      const playerNameEl = document.getElementById("player-name");
      const photoEl = document.getElementById("photo");
      const statsList = document.getElementById("stats-list");
      const defaultStatsHtml = ["2P","3P","AST","TRB","BLK","STL"].map(attr => `<li>${attr}: —</li>`).join("");

      const resetPlayerCard = () => {
        playerNameEl.textContent = "Select a Legend";
        photoEl.removeAttribute("src");
        photoEl.hidden = true;
        statsList.innerHTML = defaultStatsHtml;
      };

      const playerNames = [
        'Bill Russell','Charles Barkley','Eddie Johnson','Elvin Hayes','Hakeem Olajuwon',
        'Jason Kidd','John Stockton','Kareem Abdul-Jabbar','Karl Malone','Kevin Garnett',
        'Kobe Bryant','LeBron James','Michael Jordan','Moses Malone','Patrick Ewing',
        'Robert Parish','Shaquille O\'Neal','Tim Duncan','Walt Bellamy','Wilt Chamberlain'
      ];

      const playerIDs = {
        "LeBron James": 2544, "Michael Jordan": 893, "Kobe Bryant": 977, "Tim Duncan": 1495,
        "Wilt Chamberlain": 76375, "Shaquille O'Neal": 406, "Kareem Abdul-Jabbar": 76003,
        "Karl Malone": 252, "Kevin Garnett": 708, "Hakeem Olajuwon": 165, "Bill Russell": 78049,
        "Charles Barkley": 787, "Jason Kidd": 467, "John Stockton": 304, "Patrick Ewing": 121,
        "Moses Malone": 77449, "Robert Parish": 305, "Elvin Hayes": 76979, "Walt Bellamy": 76144,
        "Eddie Johnson": 698
      };

      const getPlayerImage = (name) => {
        const id = playerIDs[name];
        return id ? `https://cdn.nba.com/headshots/nba/latest/1040x760/${id}.png` : "images/default.jpg";
      };

      const statOrder = ["2P","3P","AST","TRB","BLK","STL"];
      const playerStats = new Map();

      const loadPlayerStats = async () => {
        const response = await fetch("data/top20_players_radar.csv");
        const csv = await response.text();
        const lines = csv.trim().split(/\r?\n/).slice(1);
        for (const line of lines) {
          const parts = line.split(",");
          if (parts.length < 3) continue;
          const player = parts[0].trim().replaceAll("*", "");
          const metric = parts[1].trim();
          const value = Number(parts[2].trim());
          if (!playerStats.has(player)) playerStats.set(player, {});
          playerStats.get(player)[metric] = Number.isFinite(value) ? value : parts[2].trim();
        }
      };

      await loadPlayerStats();

      // Calculate leaders for each stat
      const statLeaders = {};
      for (const attr of statOrder) {
        let maxValue = -Infinity;
        let leader = null;
        for (const [player, stats] of playerStats.entries()) {
          const value = stats[attr];
          if (typeof value === 'number' && value > maxValue) {
            maxValue = value;
            leader = player;
          }
        }
        statLeaders[attr] = leader;
      }

      // Determine which players are leaders in any category
      const leaderPlayers = new Set(Object.values(statLeaders));

      for (const name of playerNames) {
        const option = document.createElement("option");
        option.value = name;
        option.textContent = name;
        if (leaderPlayers.has(name)) {
          option.style.color = "#2563eb";
          option.style.fontWeight = "600";
        }
        playerSelect.appendChild(option);
      }

      const applySelection = (player) => {
        if (!player) return resetPlayerCard();
        playerNameEl.textContent = player;
        photoEl.src = getPlayerImage(player);
        photoEl.hidden = false;
        const stats = playerStats.get(player) || {};
        statsList.innerHTML = statOrder.map(attr => {
          const value = stats[attr] ?? "—";
          const isLeader = statLeaders[attr] === player;
          const statName = isLeader ? `<strong style="color: #2563eb;">${attr}</strong>` : attr;
          const statValue = isLeader ? `<strong style="color: #2563eb;">${value}</strong>` : value;
          return `<li>${statName}: ${statValue}</li>`;
        }).join("");
      };

      const updateSelection = () => {
        const selected = Array.from(playerSelect.selectedOptions).map(opt => opt.value);
        const values = selected.length ? selected : [playerSelect.options[0].value];
        radarView.signal("selectedPlayers", values).runAsync();
        applySelection(values.at(-1));
      };

      playerSelect.addEventListener("change", updateSelection);
      const first = playerSelect.options[0].value;
      radarView.signal("selectedPlayers", [first]).runAsync();
      applySelection(first);

      radarView.addSignalListener("selectedPlayers", (_, value) => {
        const arr = Array.isArray(value) ? value : [value];
        if (!arr.length) return resetPlayerCard();
        applySelection(arr.at(-1));
      });

    } catch (err) {
      console.error(err);
    }
  </script>
</body>
</html>

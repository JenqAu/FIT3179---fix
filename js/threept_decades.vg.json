{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Enhanced visual showing the NBA 3-point revolution without Y-axis titles.",
  "background": "transparent",
  "data": {"url": "data/nba_3pt_1980_2021_final.csv"},

  "padding": {"left": 0, "right": 0, "top": 0, "bottom": 0},
  "autosize": {"type": "fit-x", "contains": "padding", "resize": true},

  "vconcat": [
    {
      "width": "container",
      "height": 320,
      "encoding": {
        "x": {
          "field": "Year",
          "type": "quantitative",
          "scale": {"domain": {"param": "brush"}},
          "axis": {
            "title": "Season",
            "titleColor": "#ffffff",
            "tickCount": 8,
            "labelFontSize": 11,
            "titleFontSize": 12,
            "format": "d",
            "grid": false
          }
        }
      },
      "layer": [
        {
          "mark": {"type": "area", "color": "#81b9fe", "opacity": 0.22},
          "encoding": {
            "y": {
              "field": "Total_3PA",
              "type": "quantitative",
              "axis": {
                "title": null,
                "labelFontSize": 11,
                "titleFontSize": 12,
                "grid": false
              }
            }
          }
        },
        {
          "mark": {"type": "area", "color": "#1d4ed8", "opacity": 0.35},
          "transform": [{"filter": "datum.Year >= 2012"}],
          "encoding": {
            "y": {
              "field": "Total_3PA",
              "type": "quantitative",
              "axis": null
            }
          }
        },
        {
          "mark": {"type": "line", "strokeWidth": 3, "color": "#1d4ed8"},
          "encoding": {
            "y": {
              "field": "Total_3PA",
              "type": "quantitative",
              "axis": null
            },
            "strokeOpacity": {
              "condition": {"test": "datum.Year < 2012", "value": 0.45},
              "value": 1
            },
            "tooltip": [
              {"field": "Year", "title": "Season"},
              {"field": "Total_3PA", "title": "3PA"},
              {"field": "Avg_3P_Pct", "title": "Avg 3P%"}
            ]
          }
        },
        {
          "mark": {"type": "line", "strokeWidth": 2.2, "color": "#f97316"},
          "encoding": {
            "y": {
              "field": "Avg_3P_Pct",
              "type": "quantitative",
              "axis": {
                "title": null,
                "orient": "right",
                "format": ".1%",
                "labelFontSize": 11,
                "titleFontSize": 12,
                "grid": false
              }
            },
            "strokeOpacity": {
              "condition": {"test": "datum.Year < 2012", "value": 0.55},
              "value": 1
            }
          }
        },
        {
          "mark": {"type": "rule", "color": "#ef4444", "strokeDash": [4, 2], "strokeWidth": 1.5},
          "encoding": {"x": {"datum": 2012}},
          "transform": [{"filter": "datum.Year == 2012"}]
        },
        {
          "mark": {
            "type": "text",
            "align": "left",
            "dx": 8,
            "dy": 20,
            "baseline": "bottom",
            "fontSize": 12,
            "fontWeight": "normal",
            "color": "#b91c1c",
            "limit": 220,
            "text": "3-Point Revolution Era"
          },
          "encoding": {"x": {"datum": 2012}, "y": {"datum": 115000}}
        }
      ],
      "resolve": {"scale": {"y": "independent"}}
    },
    {
      "width": "container",
      "height": 70,
      "mark": {"type": "area", "color": "#81b9fe", "opacity": 0.35},
      "params": [
        {"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
      ],
      "encoding": {
        "x": {
          "field": "Year",
          "type": "quantitative",
          "axis": {"tickCount": 8, "title": "Select Range", "format": "d", "grid": false, "titleColor": "#ffffff"},
          "scale": {"domain": [1980, 2020]}
        },
        "y": {
          "field": "Total_3PA",
          "type": "quantitative",
          "axis": {"tickCount": 3, "grid": false, "title": null}
        }
      }
    }
  ],

  "config": {
    "axis": {
      "labelFontSize": 10,
      "titleFontSize": 12,
      "labelColor": "#ffffff",
      "titleColor": "#111827"
    },
    "view": {"stroke": "transparent"}
  }
}

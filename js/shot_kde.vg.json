{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "2D binned heatmap (KDE-like) of shots with court background.",
  "width": 700,
  "height": 658,
  "background": "#ffffff",
  "padding": 0,
  "data": {
    "url": "../data/shot_data.csv",
    "format": {"type": "csv", "parse": {"LOC_X": "number", "LOC_Y": "number"}}
  },
  "transform": [
    {"filter": "datum.PLAYER_NAME == 'Michael Jordan'"},
    {"filter": "datum.SEASON == '1996-97 Season'"}
  ],
  "layer": [
    {
      "data": {"values": [{"img": "../data/court.png", "x": -250, "x2": 250, "y": -47.5, "y2": 422.5}]},
      "mark": {"type": "image", "opacity": 0.4},
      "encoding": {
        "x": {"field": "x", "type": "quantitative", "scale": {"domain": [-250, 250]}, "axis": null},
        "x2": {"field": "x2"},
        "y": {"field": "y", "type": "quantitative", "scale": {"domain": [-47.5, 422.5]}, "axis": null},
        "y2": {"field": "y2"},
        "url": {"field": "img"}
      }
    },
    {
      "mark": {"type": "rect", "opacity": 0.9},
      "encoding": {
        "x": {
          "bin": {"step": 10},
          "field": "LOC_X",
          "type": "quantitative",
          "scale": {"domain": [-250, 250]},
          "axis": null
        },
        "y": {
          "bin": {"step": 10},
          "field": "LOC_Y",
          "type": "quantitative",
          "scale": {"domain": [-47.5, 422.5]},
          "axis": null
        },
        "color": {
          "aggregate": "count",
          "type": "quantitative",
          "scale": {"scheme": "viridis"},
          "legend": {"title": "Shot density"}
        },
        "tooltip": [
          {"aggregate": "count", "type": "quantitative", "title": "Shots"}
        ]
      }
    }
  ],
  "config": {
    "view": {"stroke": null},
    "axis": {"grid": false}
  }
}
